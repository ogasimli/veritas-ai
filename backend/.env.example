# ==============================================================================
# Veritas AI Backend Environment Configuration
# ==============================================================================
# Copy this file to .env and fill in your values
# Required variables are marked with [REQUIRED]
# Optional variables have sensible defaults

# ==============================================================================
# Database Configuration
# ==============================================================================

# [REQUIRED] PostgreSQL connection string using asyncpg driver
# Format: postgresql+asyncpg://user:password@host:port/database
# For local development with Docker Compose:
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/veritas

# For production (Cloud SQL or managed PostgreSQL):
# DATABASE_URL=postgresql+asyncpg://user:password@/veritas?host=/cloudsql/project:region:instance

# ==============================================================================
# Google Cloud Storage
# ==============================================================================

# [OPTIONAL] Google Cloud Storage bucket name for document storage
# Leave empty to disable GCS integration (documents won't be persisted)
# For local development, you can leave this empty or use a test bucket
GCS_BUCKET=

# For production:
# GCS_BUCKET=veritas-ai-documents

# Note: GCS authentication is handled automatically via:
#   - Local: gcloud auth application-default login
#   - Production: Cloud Run service account with Storage Object Admin role

# ==============================================================================
# Application Configuration
# ==============================================================================

# [OPTIONAL] Enable debug mode for verbose logging
# Set to true for development, false for production
DEBUG=false

# [OPTIONAL] Use dummy agent responses for frontend testing
# Set to true to bypass the multi-agent system and return mock audit results
# Useful for frontend development without waiting for real agent execution
USE_DUMMY_AGENTS=false

# ==============================================================================
# CORS Configuration
# ==============================================================================

# [OPTIONAL] Allowed origins for CORS (comma-separated)
# Default: All origins allowed (*)
# For production, specify your frontend domain:
# ALLOWED_ORIGINS=https://veritas-ai.com,https://www.veritas-ai.com

# ==============================================================================
# Agent Integration
# ==============================================================================

# [REQUIRED] Gemini API key for the agent pipeline
GEMINI_API_KEY=your-gemini-api-key-here

# [OPTIONAL] Use Vertex AI instead of the public Gemini API
# Set to TRUE to route through Vertex AI (requires GCP project setup)
GOOGLE_GENAI_USE_VERTEXAI=FALSE

# [OPTIONAL] Agent mode configuration
# orchestrator = run full audit pipeline, numeric_validation/logic_consistency/etc = run single validator
VERITAS_AGENT_MODE=orchestrator
# all = both pipelines, in_table_pipeline = in-table only, cross_table_pipeline = cross-table only
NUMERIC_VALIDATION_AGENT_MODE=all

# [OPTIONAL] Override Gemini model names (defaults defined in agent code)
# GEMINI_PRO_MODEL=gemini-3-pro-preview
# GEMINI_FLASH_MODEL=gemini-3-flash-preview

# ==============================================================================
# Production Deployment Notes
# ==============================================================================

# When deploying to Cloud Run, set these environment variables:
# 1. DATABASE_URL - Connection string for Cloud SQL or managed PostgreSQL
# 2. GCS_BUCKET - Production GCS bucket name
# 3. DEBUG - Set to false
# 4. USE_DUMMY_AGENTS - Set to false
#
# Service account permissions required:
# - Cloud SQL Client (for database access)
# - Storage Object Admin (for GCS bucket access)
