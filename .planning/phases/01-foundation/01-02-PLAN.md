---
phase: 01-foundation
plan: 02
type: execute
---

<objective>
Set up Next.js 14 frontend with Shadcn/UI and TanStack Query.

Purpose: Establish the frontend structure with component library and data fetching patterns.
Output: Working Next.js app with Shadcn/UI configured and API client ready.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-01-SUMMARY.md

**Tech stack (from PROJECT.md):**
- Frontend: Next.js 14 (App Router) + Shadcn/UI + TanStack Query
- API client connecting to FastAPI backend
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Next.js 14 project</name>
  <files>frontend/package.json, frontend/tsconfig.json, frontend/next.config.js, frontend/app/layout.tsx, frontend/app/page.tsx</files>
  <action>
Create Next.js 14 project in frontend/ directory:

Run: npx create-next-app@latest frontend --typescript --tailwind --eslint --app --src-dir=false --import-alias="@/*" --use-npm

This creates App Router project with:
- TypeScript configured
- Tailwind CSS (required for Shadcn/UI)
- ESLint
- App directory (not src/)
- @ import alias

After creation, update app/page.tsx to show simple "Veritas AI" heading (remove default Next.js boilerplate).
  </action>
  <verify>cd frontend && npm run build</verify>
  <done>Next.js project builds without errors, page shows "Veritas AI"</done>
</task>

<task type="auto">
  <name>Task 2: Install and configure Shadcn/UI + TanStack Query</name>
  <files>frontend/components.json, frontend/lib/utils.ts, frontend/app/globals.css, frontend/package.json</files>
  <action>
Install Shadcn/UI and TanStack Query:

1. Initialize Shadcn/UI:
   cd frontend && npx shadcn@latest init
   - Style: Default
   - Base color: Slate
   - CSS variables: Yes

2. Install TanStack Query:
   npm install @tanstack/react-query

3. Add a few essential Shadcn components we'll need:
   npx shadcn@latest add button card table badge

This sets up:
- components.json with Shadcn config
- lib/utils.ts with cn() helper
- Updated globals.css with CSS variables
- TanStack Query for server state management
  </action>
  <verify>cd frontend && npm run build && test -f components.json && test -f lib/utils.ts</verify>
  <done>Shadcn/UI configured, TanStack Query installed, essential components added</done>
</task>

<task type="auto">
  <name>Task 3: Create layout with QueryClient and API client stub</name>
  <files>frontend/lib/api-client.ts, frontend/lib/query-provider.tsx, frontend/app/layout.tsx</files>
  <action>
Set up data fetching infrastructure:

1. frontend/lib/api-client.ts:
   - Export API_BASE_URL (from env var NEXT_PUBLIC_API_URL, default http://localhost:8000)
   - Export async functions: uploadDocument(file), getJob(id), getJobFindings(id)
   - All functions throw on non-2xx response
   - Functions are stubs returning mock data for now (will implement in later phases)

2. frontend/lib/query-provider.tsx:
   - "use client" component
   - Create QueryClient with sensible defaults (staleTime: 5000, retry: 1)
   - Export QueryProvider wrapping children with QueryClientProvider

3. Update frontend/app/layout.tsx:
   - Wrap children with QueryProvider
   - Keep existing metadata, add Inter font from next/font/google

Use 'use client' directive only where needed (QueryProvider). Keep layout.tsx as server component with QueryProvider as client boundary.
  </action>
  <verify>cd frontend && npm run build && npm run lint</verify>
  <done>QueryProvider wraps app, API client exports stub functions, build passes</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd frontend && npm run build` succeeds
- [ ] `cd frontend && npm run lint` passes
- [ ] Shadcn components importable: `import { Button } from "@/components/ui/button"`
- [ ] API client exports all stub functions
</verification>

<success_criteria>
- All tasks completed
- Next.js app builds and runs
- Shadcn/UI configured with button, card, table, badge components
- TanStack Query configured with provider
- API client stub ready for implementation
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
